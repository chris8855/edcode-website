{"version":3,"sources":["webpack:///./src/components/video-display.js","webpack:///./src/pages/room.js"],"names":["VideoDisplay","roomID","useTwilioVideo","state","startVideo","videoRef","leaveRoom","useEffect","token","navigate","roomName","room","window","addEventListener","removeEventListener","className","ref","onClick","BounceToChat","replace","Room","path","default"],"mappings":"2KAiCeA,EA7BM,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OAAa,EACgBC,cAA3CC,EAD2B,EAC3BA,MAAOC,EADoB,EACpBA,WAAYC,EADQ,EACRA,SAAUC,EADF,EACEA,UAerC,OAdAC,qBAAU,WAUR,OATKJ,EAAMK,OACTC,mBAAS,QAAS,CAAEN,MAAO,CAAEO,SAAUT,KAEpCE,EAAMQ,MACTP,IAGFQ,OAAOC,iBAAiB,eAAgBP,GAEjC,WACLM,OAAOE,oBAAoB,eAAgBR,MAE5C,CAACH,EAAOF,EAAQG,EAAYE,IAE7B,oCACE,yBAAKS,UAAU,OAAOC,IAAKX,IAC3B,qCAAWJ,GACVE,EAAMQ,MACL,4BAAQI,UAAU,aAAaE,QAASX,GAAxC,gBClBFY,EAAe,WAKnB,OAJAX,qBAAU,WACRE,mBAAS,QAAS,CAAEU,SAAS,MAC5B,IAEI,MAYMC,UATF,kBACX,kBAAC,IAAD,KACE,kBAAC,SAAD,KACE,kBAAC,EAAD,CAAcC,KAAM,iBACpB,kBAAC,EAAD,CAAcC,SAAO","file":"component---src-pages-room-js-fca5f3941bcc279ca8cf.js","sourcesContent":["import React, { useEffect } from \"react\"\nimport useTwilioVideo from \"../hooks/useTwilioVideo\"\nimport { navigate } from \"gatsby\"\n\nconst VideoDisplay = ({ roomID }) => {\n  const { state, startVideo, videoRef, leaveRoom } = useTwilioVideo()\n  useEffect(() => {\n    if (!state.token) {\n      navigate(\"/chat\", { state: { roomName: roomID } })\n    }\n    if (!state.room) {\n      startVideo()\n    }\n\n    window.addEventListener(\"beforeunload\", leaveRoom)\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", leaveRoom)\n    }\n  }, [state, roomID, startVideo, leaveRoom])\n  return (\n    <>\n      <div className=\"chat\" ref={videoRef} />\n      <h1>room: {roomID}</h1>\n      {state.room && (\n        <button className=\"leave-room\" onClick={leaveRoom}>\n          Leave Room\n        </button>\n      )}\n    </>\n  )\n}\n\nexport default VideoDisplay\n","import React, { useEffect } from \"react\"\nimport { Router } from \"@reach/router\"\n\nimport Layout from \"../components/layout\"\nimport VideoDisplay from \"../components/video-display\"\nimport { navigate } from \"gatsby\"\n\nconst BounceToChat = () => {\n  useEffect(() => {\n    navigate(\"/chat\", { replace: true })\n  }, [])\n\n  return null\n}\n\nconst Room = () => (\n  <Layout>\n    <Router>\n      <VideoDisplay path={\"room/:roomID\"} />\n      <BounceToChat default />\n    </Router>\n  </Layout>\n)\n\nexport default Room\n"],"sourceRoot":""}